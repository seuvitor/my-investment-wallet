!function(e){var t={};function n(a){if(t[a])return t[a].exports;var o=t[a]={i:a,l:!1,exports:{}};return e[a].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(a,o,function(t){return e[t]}.bind(null,o));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){const a=React.createElement,{HashRouter:o,NavLink:l,Route:r,Switch:i,useLocation:c,useParams:s,useHistory:u}=window.ReactRouterDOM,{AppBar:d,Box:p,Button:m,createMuiTheme:y,Chip:v,Divider:h,Dialog:f,DialogActions:g,DialogContent:b,DialogTitle:C,Drawer:R,Icon:w,IconButton:x,Grid:k,ListItem:S,ListItemText:P,Menu:I,MenuItem:T,Paper:A,Snackbar:_,Table:E,TableBody:B,TableCell:D,TableContainer:O,TableHead:N,TableRow:z,TextField:M,ThemeProvider:V,Toolbar:L,Typography:j}=MaterialUI,F="7s3vb9runcfjvgetrvhdfd97at",Q="https://carteira-investimentos.auth.us-east-1.amazoncognito.com/oauth2/token",W="https://seuvitor.github.io/my-investment-wallet/?auth-redirect",$=`https://carteira-investimentos.auth.us-east-1.amazoncognito.com/login?client_id=${F}&response_type=code&scope=email+openid+profile&redirect_uri=${W}`,U=({children:e})=>{const[t]=React.useState(y({palette:{primary:{main:"#556cd6"}}}));return a(V,{theme:t},e)},q=React.createContext(),G=({children:e})=>{const[t,n]=React.useState(""),[o,l]=React.useState(!1),r=React.useCallback(e=>{n(e),l(!0)},[]),i=()=>{n(""),l(!1)};return a(q.Provider,{value:{showMessage:r}},e,a(_,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:o,autoHideDuration:5e3,onClose:i,message:t,action:a(x,{color:"inherit",onClick:i},a(w,null,"close"))},null))},K=React.createContext(),H=({children:e})=>{const[t,n]=React.useState({identityId:void 0,id:void 0,name:void 0,email:void 0,groups:void 0,idToken:void 0,accessToken:void 0}),[o,l]=React.useState(void 0),[r,i]=React.useState(void 0),[c]=React.useState(15e5),[s,u]=React.useState(void 0),d=React.useCallback(()=>new Promise(e=>{n({identityId:void 0,id:void 0,name:void 0,email:void 0,groups:void 0,idToken:void 0,accessToken:void 0}),l(void 0),i(void 0),e()}),[]);React.useEffect(()=>{i(s?e=>e?(e.update({credentials:s}),e):new AWS.Config({region:"us-east-1",credentials:s}):void 0)},[s]);const p=React.useCallback((e,t)=>{const a=new AWS.CognitoIdentityCredentials({IdentityPoolId:"us-east-1:874c45d2-0eb6-4d04-92f0-b8769dcbcc54",...e&&{Logins:{"cognito-idp.us-east-1.amazonaws.com/us-east-1_SjfN8ExVX":e}}},{region:"us-east-1"});return new Promise((o,l)=>{a.clearCachedId(),a.getPromise().then(()=>{u(a),n(n=>{const o=e&&JSON.parse(atob(e.split(".")[1]));return n.identityId=a.identityId,n.id=o&&o.sub,n.name=o?o.name:"Usuário não logado",n.email=o&&o.email,n.groups=o&&o["cognito:groups"],n.idToken=e,n.accessToken=t,n}),o()}).catch(e=>{u(void 0),n({identityId:void 0,id:void 0,name:void 0,email:void 0,groups:void 0,idToken:void 0,accessToken:void 0}),console.warn("Could not validate credentials",e),l(e)})})},[]),m=React.useCallback(e=>new Promise((t,n)=>{e?fetch(Q,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:`grant_type=refresh_token&client_id=${F}&refresh_token=${e}`}).then(e=>{e.json().then(e=>{p(e.id_token,e.access_token).then(()=>{t()}).catch(e=>{console.error("Could not login with refreshed tokens",e),n(e)})}).catch(e=>{console.error("Could not decode authentication response",e),n(e)})}).catch(e=>{console.error("Could not get refreshed tokens",e),n(e)}):(console.warn("No refreshToken available"),n(new Error("No refreshToken available")))}),[p]);((e,t)=>{const n=React.useRef(),a=React.useCallback(()=>{const e=n.current;e&&(n.current=void 0,clearInterval(e))},[n]);React.useEffect(()=>(n.current=setInterval(e,t),a),[e,t,a])})(React.useCallback(()=>{m(o).catch(e=>{console.error("Could not refresh tokens",e)})},[o,m]),c);const y=React.useCallback(()=>p(),[p]),v=React.useCallback(e=>new Promise((t,n)=>{fetch(Q,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:`grant_type=authorization_code&client_id=${F}&code=${e}&redirect_uri=${W}`}).then(e=>{e.json().then(e=>{m(e.refresh_token).then(()=>{l(e.refresh_token),t()}).catch(e=>{console.error("Could not login with refreshed tokens",e),l(void 0),n(e)})}).catch(e=>{console.error("Could not decode authentication response",e),l(void 0),n(e)})}).catch(e=>{console.error("Could not get identification tokens with this authorization code",e),l(void 0),n(e)})}),[m]);return a(K.Provider,{value:{user:t,awsConfig:r,awsCredentials:s,loginAnonymously:y,loginWithAuthorizationCode:v,logoff:d}},e)},J=React.createContext(),X=({children:e})=>{const{awsConfig:t,awsCredentials:n}=React.useContext(K),[o,l]=React.useState();return React.useEffect(()=>{l(t?new AWS.DynamoDB.DocumentClient(t):void 0)},[t]),React.useEffect(()=>{n&&l(e=>(e&&e.service.config.update({credentials:n}),e))},[n]),a(J.Provider,{value:{documentDB:o}},e)},Y=React.createContext(),Z=({children:e})=>{const{user:{accessToken:t},awsConfig:n,awsCredentials:o}=React.useContext(K),[l,r]=React.useState();React.useEffect(()=>{r(n?new AWS.Lambda(n):void 0)},[n]),React.useEffect(()=>{o&&r(e=>(e&&e.config.update({credentials:o}),e))},[o]);const i=React.useCallback((e,n)=>{const a={FunctionName:e,ClientContext:btoa(JSON.stringify({accessToken:t}))};return n&&(a.Payload=JSON.stringify(n)),new Promise((e,t)=>{l.invoke(a).promise().then(n=>{n.StatusCode&&200===n.StatusCode&&n.Payload||t(n);const a=JSON.parse(n.Payload);a&&a.statusCode&&200===a.statusCode||t(n),e(a.body)}).catch(e=>{t(e)})})},[l,t]);return a(Y.Provider,{value:{invokeLambda:l&&i}},e)},ee=({children:e})=>a(U,null,a(G,null,a(H,null,a(X,null,a(Z,null,e))))),te=()=>{const{user:{name:e}}=React.useContext(K);return e?null:a(React.Fragment,null,a(m,{color:"inherit",href:$},"Login"))},ne=()=>{const{showMessage:e}=React.useContext(q),{user:{name:t},logoff:n}=React.useContext(K),[o,l]=React.useState(!1),r=React.useRef(null);return t?a(React.Fragment,null,a(x,{color:"inherit",ref:r,onClick:()=>{l(!0)}},a(w,null,"account_circle")),a(I,{open:o,onClose:()=>{l(!1)},anchorEl:r.current,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"}},a(T,{disabled:!0},t),a(h,null,null),a(T,{onClick:()=>{n().then(()=>{e("Logoff succesful")}).catch(()=>{e("Logoff failed")}),l(!1)}},"Logoff"))):null},ae=({setDrawerOpen:e,routes:t})=>{const n=c(),o=t.find(e=>e.path===n.pathname);return a(d,null,a(L,null,a(x,{edge:"start",color:"inherit",onClick:()=>e(!0)},a(w,null,"menu")),a(j,{style:{flexGrow:1}},o?o.label:""),a(te,null,null),a(ne,null,null)))},oe=({routes:e,drawerOpen:t,setDrawerOpen:n})=>{const{user:{groups:o}}=React.useContext(K),r=()=>n(!1);return a(R,{open:t,onClose:r},a(L,{onClick:r,style:{padding:"inherit"}},a(S,{button:!0,style:{justifyContent:"flex-end",height:"100%"}},a(w,null,"chevron_left"))),a(h,null,null),e.filter(e=>!e.hideFromMenu).filter(e=>{return!(t=e.authorizedGroups)||!!o&&t.some(e=>o.includes(e));var t}).map(e=>a(S,{key:e.name+"-route-drawer-item",button:!0,component:l,activeClassName:"Mui-selected",to:e.path,onClick:r,...e.options},a(P,{primary:e.label},null))))},le=()=>a("div",null,null),re=()=>{const{showMessage:e}=React.useContext(q),{loginWithAuthorizationCode:t}=React.useContext(K),{authorization_code:n}=s(),o=u();return React.useEffect(()=>{t(n).then(()=>{e("Usuário logado com sucesso"),o.replace("/")}).catch(t=>{e("Não foi possível completar o login"),console.error("Não foi possível completar o login",t)})},[n,t,e,o]),a("div",null,null)},ie=(e,t,n=2)=>new Big(e).plus(t).toFixed(null===n?void 0:n),ce=(e,t)=>new Big(e).minus(new Big(t)).toFixed(2),se=(e,t,n=2)=>new Big(e).times(new Big(t)).toFixed(null===n?void 0:n),ue=(e,t,n=Big.DP,a=Big.RM)=>new Big(e).div(new Big(t)).round(n,a).toFixed(n),de=e=>e.map(e=>new Big(e)).reduce((e,t)=>e.plus(t),new Big(0)).toFixed(2),pe=(e,t)=>{const n={TableName:"priced_position",Key:{user_id:t},AttributesToGet:["assets"]};return new Promise((t,a)=>{e.get(n).promise().then(e=>{t(e.Item&&e.Item.assets)}).catch(e=>{a(e)})})},me=({setAvailableValue:e})=>{const[t,n]=React.useState(!0);return a("form",{onSubmit:t=>{t.preventDefault(),e(t.target.availableValue.value)}},a(k,{container:!0,alignItems:"center",spacing:2},a(k,{item:!0,xs:12},a(j,{variant:"body1"},"Informe o valor disponível para calcular a alocação proporcional")),a(k,{item:!0},a(M,{name:"availableValue",label:"Valor disponível",variant:"filled",onChange:e=>{try{Big(e.target.value),n(!0)}catch(e){n(!1)}},error:!t},null)),a(k,{item:!0},a(m,{type:"submit",variant:"contained",color:"primary",disabled:!t},"Calcular aportes"))))},ye=({defaultCurrency:e,otherCurrencies:t})=>{const{documentDB:n}=React.useContext(J),[a,o]=React.useState(void 0);React.useEffect(()=>{if(n){const a=t.map(t=>`${t}/${e}`);Promise.all(a.map(e=>(async(e,t)=>{const n={TableName:"price",Key:{timestamp:"now"},ProjectionExpression:"prices.#assetCode",ExpressionAttributeNames:{"#assetCode":t}},a=await e.get(n).promise();if(!a.Item||!a.Item.prices)throw new Error("Price data not found");return a.Item.prices[t]})(n,e))).then(e=>{const n=e.reduce((e,n,a)=>({...e,[t[a]]:n}),{});o(n)}).catch(e=>{o(void 0),console.error("Could not get currency exchange rates",e)})}else o(void 0)},[n,e,t]);const l=React.useCallback((t,n)=>n===e?t:se(t,a[n]),[a,e]),r=React.useCallback((t,n)=>n===e?t:se(t,ue("1",a[n])),[a,e]);return{toDefaultCurrency:a&&l,backToAssetCurrency:a&&r}},ve=()=>{const{user:{identityId:e}}=React.useContext(K),{documentDB:t}=React.useContext(J),[n,o]=React.useState(void 0),[l,r]=React.useState(void 0),[i,c]=React.useState(void 0),[s]=React.useState({defaultCurrency:"BRL",otherCurrencies:["USD"]}),{toDefaultCurrency:u,backToAssetCurrency:d}=ye(s);React.useEffect(()=>{t&&e?pe(t,e).then(e=>{o({assets:e})}).catch(()=>{o(void 0)}):o(void 0)},[t,e]),React.useEffect(()=>{if(n&&n.assets&&n.assets.length&&l&&u&&d){const e=de(n.assets.map(e=>u(e.value,e.currency))),t=ie(e,l),a=[...n.assets];a.forEach(e=>{var n,a;e.idealFutureValue=d((n=t,a=e.targetPercent,se(n,ue(a,100,Big.DP))),e.currency)}),a.forEach(e=>{var t,n;e.idealInvestment=(t="0.00",n=ce(e.idealFutureValue,e.value),new Big(t).cmp(new Big(n))>=0?t:n)});const o=de(a.map(e=>u(e.idealInvestment,e.currency)));a.forEach(e=>{e.proportionalizedIdealInvestment=d(((e,t,n,a=2)=>se(e,ue(t,n,Big.DP),a))(u(e.idealInvestment,e.currency),l,o),e.currency)}),a.forEach(e=>{e.investmentQuantity=se(e.minimum,ue(e.proportionalizedIdealInvestment,se(e.price,e.minimum,Big.DP),0,0),null)}),a.forEach(e=>{e.investment=se(e.investmentQuantity,e.price)});const r=de(a.map(e=>u(e.investment,e.currency))),i=ce(l,r);a.forEach(e=>{e.futureQuantity=ie(e.quantity,e.investmentQuantity,null)}),a.forEach(e=>{e.futureValue=se(e.futureQuantity,e.price)});const s=de(a.map(e=>u(e.futureValue,e.currency)));a.forEach(e=>{e.futurePercent=se("100.00",ue(u(e.futureValue,e.currency),s),4)}),c({assets:a,totalInvestment:r,remainingAvailableValue:i})}else c(void 0)},[n,l,u,d]);const m=i&&i.assets||n&&n.assets;return a(React.Fragment,null,a(me,{setAvailableValue:r},null),a(h,{absolute:!1,style:{marginTop:"0.5em",marginBottom:"0.5em"}},null),m&&a(O,{component:p,style:{width:"fit-content"}},a(E,{style:{tableLayout:"auto",borderCollapse:"separate",borderSpacing:"10px"}},a(N,null,a(z,null,a(D,{style:{border:0}}),a(D,{style:{border:0}}),a(D,{align:"center",style:{border:0}},"Posição atual"),i&&a(D,{style:{border:0}}),i&&a(D,{align:"center",style:{border:0}},"Novo aporte"),i&&a(D,{style:{border:0}}),i&&a(D,{align:"center",style:{border:0}},"Posição futura"))),a(B,null,m.map(e=>a(z,{key:e.code},a(D,{style:{display:"contents"}},a(p,{component:A,p:2,style:{display:"table-cell",verticalAlign:"middle"}},a(k,{container:!0},a(k,{item:!0,xs:6},a(j,null,e.code)),a(k,{item:!0,xs:6,align:"right"},a(j,{variant:"caption",color:"textSecondary"},e.currency+" "),a(j,{display:"inline"},""+e.price)),a(k,{item:!0,xs:12},a(v,{size:"small",label:e.name}))))),a(D,{style:{display:"contents"}},a(p,{component:A,p:2,align:"center",style:{display:"table-cell",verticalAlign:"middle"}},a(j,{variant:"caption",color:"textSecondary"},"objetivo"),a(j,null,e.targetPercent+"%"))),a(D,{style:{display:"contents"}},a(p,{component:A,p:2,align:"center",style:{display:"table-cell",verticalAlign:"middle"}},a(j,{variant:"caption",display:"block"},e.quantity+" cotas"),a(j,{variant:"caption",color:"textSecondary"},e.currency+" "),a(j,{display:"inline"},""+e.value),a(j,{variant:"body2"},e.currentPercent+"%"))),i&&a(D,{padding:"none",align:"center",style:{border:0}},a(w,null,"chevron_right")),i&&a(D,{style:{display:"contents"}},a(p,{component:A,p:2,align:"center",elevation:"0"===e.investmentQuantity?1:6,style:{display:"table-cell",verticalAlign:"middle",..."0"!==e.investmentQuantity&&{backgroundColor:"lightblue"}}},a(j,{variant:"caption"},e.code),a(j,{style:{..."0"!==e.investmentQuantity&&{fontWeight:"bold"}}},e.investmentQuantity+" cotas"),a(j,{variant:"caption",color:"textSecondary"},e.currency+" "),a(j,{variant:"caption"},""+e.investment))),i&&a(D,{padding:"none",align:"center",style:{border:0}},a(w,null,"chevron_right")),i&&a(D,{style:{display:"contents"}},a(p,{component:A,p:2,align:"center",style:{display:"table-cell",verticalAlign:"middle"}},a(j,{variant:"caption",display:"block"},e.futureQuantity+" cotas"),a(j,{variant:"caption",color:"textSecondary"},e.currency+" "),a(j,{display:"inline"},""+e.futureValue),a(j,{variant:"body2"},e.futurePercent+"%"))))),a(z,null,a(D,{style:{border:0}}),a(D,{style:{border:0}}),a(D,{style:{border:0}}),i&&a(D,{style:{border:0}}),i&&a(D,{align:"center",padding:"none",style:{border:0}},a(p,{component:A,p:2,elevation:6,align:"center"},a(j,{variant:"caption",color:"textSecondary",display:"block"},"aporte efetivo"),a(j,{variant:"caption",color:"textSecondary"},s.defaultCurrency+" "),a(j,{display:"inline"},""+i.totalInvestment),a(h,{light:!0,variant:"fullWidth"},null),a(j,{variant:"caption",color:"textSecondary",display:"block"},"valor restante"),a(j,{variant:"caption",color:"textSecondary"},s.defaultCurrency+" "),a(j,{display:"inline"},""+i.remainingAvailableValue))),i&&a(D,{style:{border:0}}),i&&a(D,{style:{border:0}}))))))},he=()=>{const{user:{identityId:e}}=React.useContext(K),{documentDB:t}=React.useContext(J),[n,o]=React.useState([]);return React.useEffect(()=>{t&&e?((e,t)=>{const n={TableName:"target_allocation",Key:{user_id:t},AttributesToGet:["allocations"]};return new Promise((t,a)=>{e.get(n).promise().then(e=>{t(e.Item&&e.Item.allocations)}).catch(e=>{a(e)})})})(t,e).then(n=>{pe(t,e).then(e=>{const t=n.map(t=>({...t,currentPercent:de(e.filter(e=>e.category===t.category&&e.currency===t.currency).map(e=>e.currentPercent))}));o(t)})}).catch(()=>{o([])}):o([])},[t,e]),n&&0!==n.length?a(O,{component:A,style:{width:"fit-content"}},a(E,{style:{tableLayout:"auto"}},a(N,null,a(z,null,a(D,null,"Categoria"),a(D,null,"Moeda"),a(D,null,"Atual"),a(D,null,"Objetivo"))),a(B,null,n.map(({category:e,currency:t,currentPercent:n,percent:o})=>a(z,{key:`${e}|${t}`},a(D,null,e),a(D,null,t),a(D,null,n+"%"),a(D,null,o+"%")))))):null},fe=({selectedAsset:e,assetEditionOpen:t,assetUpdated:n,dismissAssetEdition:o})=>{const{user:{identityId:l}}=React.useContext(K),{documentDB:r}=React.useContext(J),i=()=>{o()};return e?a(f,{open:t,onClose:i},a("form",{onSubmit:t=>{t.preventDefault();const a={currency:t.target.currency.value,category:t.target.category.value,name:t.target.name.value,minimum:t.target.minimum.value,quantity:t.target.quantity.value,weight:t.target.weight.value};((e,t,n,a)=>{const o={TableName:"position",Key:{user_id:t},UpdateExpression:"set assets.#assetCode = :asset",ExpressionAttributeNames:{"#assetCode":n},ExpressionAttributeValues:{":asset":a}};return e.update(o).promise()})(r,l,e.code,a).then(()=>{n({code:e.code,...a}),o()}).catch(e=>{console.error("Could not update asset position",e)})}},a(C,null,"Editar ativo: "+e.code),a(b,null,a(k,{container:!0,spacing:2},a(k,{item:!0,xs:2},a(M,{name:"currency",defaultValue:e.currency,label:"Moeda",variant:"filled",fullWidth:!0},null)),a(k,{item:!0,xs:4},a(M,{name:"category",defaultValue:e.category,label:"Categoria",variant:"filled",fullWidth:!0},null)),a(k,{item:!0,xs:6},a(M,{name:"name",defaultValue:e.name,label:"Nome",variant:"filled",fullWidth:!0},null)),a(k,{item:!0,xs:3},a(M,{name:"minimum",defaultValue:e.minimum,label:"Qtd mínima",variant:"filled",fullWidth:!0},null)),a(k,{item:!0,xs:3},a(M,{name:"quantity",defaultValue:e.quantity,label:"Qtd atual",variant:"filled",fullWidth:!0},null)),a(k,{item:!0,xs:2},a(M,{name:"weight",defaultValue:e.weight,label:"Peso",variant:"filled",fullWidth:!0},null)))),a(g,null,a(m,{onClick:i,variant:"contained",color:"secondary"},"Cancelar"),a(m,{type:"submit",variant:"contained",color:"primary"},"Salvar")))):null},ge=()=>{const{user:{identityId:e}}=React.useContext(K),{documentDB:t}=React.useContext(J),[n,o]=React.useState([]),[l,r]=React.useState(),[i,c]=React.useState(!1);React.useEffect(()=>{t&&e?((e,t)=>{const n={TableName:"position",Key:{user_id:t},AttributesToGet:["assets"]};return new Promise((t,a)=>{e.get(n).promise().then(e=>{e.Item&&e.Item.assets||a(new Error("no position found for this user id")),t(e.Item&&e.Item.assets)}).catch(e=>{a(e)})})})(t,e).then(e=>{o((e=>e.sort((e,t)=>e.code.localeCompare(t.code)).sort((e,t)=>e.category.localeCompare(t.category)).sort((e,t)=>e.currency.localeCompare(t.currency)))(Object.entries(e).map(([e,t])=>({code:e,...t}))))}).catch(()=>{o([])}):o([])},[t,e]);const s=React.useCallback(()=>{c(!1),r(void 0)},[]),u=React.useCallback(e=>{o(t=>t.map(t=>t.code===e.code?e:t))},[]);return n&&0!==n.length?a(O,{component:A,style:{width:"fit-content"}},a(E,{style:{tableLayout:"auto"}},a(N,null,a(z,null,a(D,null,"Moeda"),a(D,null,"Categoria"),a(D,null,"Código"),a(D,null,"Qtd mínima"),a(D,null,"Qtd atual"),a(D,null,"Peso"))),a(B,null,n.map(e=>a(z,{key:e.code,hover:!0,onClick:()=>(e=>{r(e),c(!0)})(e)},a(D,null,e.currency),a(D,null,e.category),a(D,null,e.code),a(D,null,e.minimum),a(D,null,e.quantity),a(D,null,e.weight))))),a(fe,{selectedAsset:l,assetEditionOpen:i,assetUpdated:u,dismissAssetEdition:s},null)):null},be=(e,t,n)=>{t("update_asset_allocation",{user_id:n}).then(()=>{e("Portfólio atualizado com sucesso")}).catch(t=>{e("Não foi possível atualizar o portfólio"),console.error("Não foi possível atualizar o portfólio",t)})},Ce=()=>{const{showMessage:e}=React.useContext(q),{user:{identityId:t}}=React.useContext(K),{invokeLambda:n}=React.useContext(Y);return a("div",{},a(m,{variant:"contained",onClick:()=>{be(e,n,t)},disabled:!n},"Atualizar Portfólio"))},Re=()=>{const{showMessage:e}=React.useContext(q),{user:{identityId:t}}=React.useContext(K),{invokeLambda:n}=React.useContext(Y),o=React.useRef(),l=a=>{const o=a.target.result;let l;try{l=o.split(/\r\n|\n/).slice(1).map(e=>[...e.matchAll(/"[^"]*"|[^,]+/g)]).reduce((e,t)=>{const[n,a]=t.map(e=>e[0]).map(e=>e.replace(/^"(.*)"$/,"$1")).map(e=>e.replace(",","."));return{...e,[n]:a}},{})}catch(t){e("Não foi possível carregar o arquivo"),console.error("Não foi possível carregar o arquivo",t)}l&&n("update_prices",{prices:l}).then(()=>{e("Preços atualizados com sucesso"),be(e,n,t)}).catch(t=>{e("Não foi possível atualizar os preços"),console.error("Não foi possível atualizar os preços",t)})};return a("form",{ref:o},a("input",{id:"contained-button-file",accept:".csv",type:"file",style:{display:"none"},onChange:e=>{const t=new FileReader;t.onload=l,t.onloadend=()=>o.current.reset(),t.readAsText(e.target.files[0])},disabled:!n},null),a("label",{htmlFor:"contained-button-file"},a(m,{disabled:!n,variant:"contained",color:"primary",component:"span"},"Upload Preços Atualizados")))};if("/my-investment-wallet/"===window.location.pathname){const e=new URLSearchParams(window.location.search);null!==e.get("auth-redirect")&&null!==e.get("code")&&window.history.replaceState({},"","/my-investment-wallet/#/authentication/"+e.get("code"))}ReactDOM.render(a(()=>{const[e,t]=React.useState(!1),n=[{name:"main",label:"Main",path:"/",search:"?login-page=:page&code=:code",component:le,options:{exact:!0}},{name:"target-allocation",label:"Macro-Alocação",path:"/target-allocation",component:he},{name:"position",label:"Posição",path:"/position",component:ge},{name:"suggestedAllocation",label:"Alocação Sugerida",path:"/suggested-allocation",component:ve},{name:"update-allocation",label:"Atualização do Portfólio",path:"/update-allocation",component:Ce},{name:"upload-prices",label:"Upload Prices",path:"/upload-prices",authorizedGroups:["admin"],component:Re},{name:"authentication",label:"Athentication",path:"/authentication/:authorization_code",hideFromMenu:!0,component:re}];return a(ee,null,a(o,null,a(ae,{setDrawerOpen:t,routes:n},null),a(oe,{routes:n,drawerOpen:e,setDrawerOpen:t}),a(L,null,null),a(i,null,n.map(e=>a(r,{key:e.name+"-route",path:e.path,...e.options},a(e.component))))))},null,null),document.getElementById("app_container"))}]);